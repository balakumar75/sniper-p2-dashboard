<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Sniper Trades</title>
  <style>
    body { font-family: Arial; background:#111; color:#eee; padding:20px; }
    h1   { color:#2ecc71; }
    table{ width:100%; border-collapse:collapse; margin-top:20px; font-size:14px;}
    th,td{ border:1px solid #333; padding:6px 8px; text-align:center; }
    th   { background:#222; }
    tr:nth-child(even){ background:#1a1a1a; }
    .buy  { color:#2ecc71; font-weight:bold; }
    .sell { color:#e74c3c;  font-weight:bold; }
    .sector-good { color:#2ecc71; }
    .sector-weak { color:#e0a300; }
  </style>
</head>
<body>
  <h1>üìà Sniper Trades ‚Äî Live Dashboard</h1>

  {% if trades %}
  <table>
    <thead>
      <tr>
        <th>Date</th>
        <th>Symbol</th>
        <th>Type</th>
        <th>Expiry</th>
        <th>Strike / CMP</th>
        <th>Entry</th>
        <th>Target</th>
        <th>SL</th>
        <th>PoP %</th>
        <th>Sector</th>
        <th>Tags</th>
        <th>Status</th>
        <th>Exit Date</th>
        <th>P&L (‚Çπ)</th>
        <th>Action</th>
      </tr>
    </thead>
    <tbody>
      {% for trade in trades %}
      <tr>
        <td>{{ trade.date }}</td>
        <td>{{ trade.symbol }}</td>
        <td>{{ trade.type }}</td>
        <td>{{ trade.options.expiry if trade.options is defined else "‚Äî" }}</td>
        <td>
          {% if trade.options is defined %}
            CE {{ trade.options.call }} / PE {{ trade.options.put }}
          {% else %}
            {{ trade.cmp }}
          {% endif %}
        </td>
        <td>{{ trade.entry }}</td>
        <td>{{ trade.target }}</td>
        <td>{{ trade.sl }}</td>
        <td>{{ trade.pop_pct }}</td>
        <td class="{% if 'Leader' in trade.sector %}sector-good{% elif 'Weak' in trade.sector %}sector-weak{% endif %}">
          {{ trade.sector }}
        </td>
        <td>{{ trade.tags | join(", ") }}</td>
        <td>{{ trade.status }}</td>
        <td>{{ trade.exit_date }}</td>
        <td>{{ trade.pnl }}</td>
        <td class="{{ 'buy' if trade.action == 'Buy' else 'sell' }}">{{ trade.action }}</td>
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% else %}
    <p>‚ùå No trades found.</p>
  {% endif %}
</body>
</html>
